(()=>{"use strict";var t=document.getElementById("front"),e=document.getElementById("card1"),i=document.getElementById("card2"),n=document.getElementById("card3"),o=document.getElementById("back"),s=document.getElementById("front-img"),r=document.getElementById("card1-img"),a=document.getElementById("card2-img"),c=document.getElementById("card3-img"),d=document.getElementById("back-img"),h=document.getElementById("modal"),l=document.getElementById("modal-img"),m=document.getElementById("modal-hide-button"),u=document.getElementById("controls-container"),p=document.getElementById("pov-wrapper"),v=document.getElementById("pov"),g=document.getElementById("pov-area"),f=document.getElementById("pov-container"),y=document.getElementById("cards-container"),C=document.getElementById("cards-profiles-container"),w=document.getElementById("card1-position"),E=(document.getElementById("images-wrapper"),document.getElementById("front-profile")),P=document.getElementById("card1-profile"),B=document.getElementById("card2-profile"),b=document.getElementById("card3-profile"),L=document.getElementById("back-profile"),I=document.getElementById("left-arrow-container"),S=document.getElementById("right-arrow-container"),M=document.getElementById("customize-btn"),k=document.getElementById("pictures-toggle-button"),x=document.getElementById("borders-toggle-button"),T=function(){function h(){this.cardsElements=[t,e,i,n,o],this.cardsImgsElements=[s,r,a,c,d],this.cardsProfiles=[E,P,B,b,L],this.forwardTransitionFront,this.forwardTransitionCard1,this.forwardTransitionCard2,this.forwardTransitionCard3,this.backwardTransitionCard1,this.backwardTransitionCard2,this.backwardTransitionCard3,this.backwardTransitionBack,this.isBordersMode=!1}return h.prototype.updateBordersMode=function(t){this.isBordersMode=t},h.prototype.createAnimation=function(t,e){var i={width:t.style.width,height:t.style.height,transform:t.style.transform};return null!=e&&(i.opacity=e),[{},i]},h.prototype.updateAnimations=function(){this.forwardTransitionFront=this.createAnimation(e,"1"),this.forwardTransitionCard1=this.createAnimation(i),this.forwardTransitionCard2=this.createAnimation(n),this.forwardTransitionCard3=this.createAnimation(o,"0"),this.backwardTransitionCard1=this.createAnimation(t,"0"),this.backwardTransitionCard2=this.createAnimation(e),this.backwardTransitionCard3=this.createAnimation(i),this.backwardTransitionBack=this.createAnimation(n,"1")},h.prototype.getCardsElements=function(){return this.cardsElements},h.prototype.getCardsImgsElements=function(){return this.cardsImgsElements},h.prototype.getCardsProfiles=function(){return this.cardsProfiles},h}(),A=["https://source.unsplash.com/1fUu0dratoM/1200x900","https://source.unsplash.com/n20DUSVsUk8/1200x900","https://source.unsplash.com/ppnnu5-9bgI/1200x900","https://source.unsplash.com/vgxIfXwsUAE/1200x900","https://source.unsplash.com/KhhOAsE5M6Y/1200x900"];function W(t){var e=window.innerWidth;e<1e3?(document.body.classList.add("small-size"),document.body.classList.remove("medium-size"),t.closeControlsPanel(),t.setBordersMode(!1)):(document.body.classList.remove("small-size"),e<1400?document.body.classList.add("medium-size"):document.body.classList.remove("medium-size")),t.updateWindowInnerHeight()}var D=function(){function m(t){this.cardsService=t,this.basicAnimationDuration=50,this.animationOptions={duration:300,fill:"forwards",easing:"ease-in-out"},this.srcsLength=A.length,this.isAnimationInProgress=!1,this.headPosition=0,this.cardsElements=this.cardsService.getCardsElements()}return Object.defineProperty(m.prototype,"isMinWidthWindow",{get:function(){return window.innerWidth>1e3},enumerable:!1,configurable:!0}),m.prototype.setImgsSources=function(){this.cardsService.getCardsImgsElements().forEach((function(t,e){return t.src=A[e]}))},m.prototype.showCards=function(){this.cardsElements.concat(w).forEach((function(t){return t.style.visibility="visible"}))},m.prototype.showModal=function(){this.cardsService.isBordersMode||(document.body.style.overflowY="hidden",h.style.display="block",l.src=A[(this.headPosition+1)%this.srcsLength])},m.prototype.hideModal=function(){document.body.style.overflowY="auto",h.style.display="none"},m.prototype.next=function(){var o=this;if(!this.isAnimationInProgress){var h,l,m,u,p=!1;this.isAnimationInProgress=!0,this.isMinWidthWindow&&(p=!0,h=t.animate(this.cardsService.forwardTransitionFront,this.animationOptions),l=e.animate(this.cardsService.forwardTransitionCard1,this.animationOptions),m=i.animate(this.cardsService.forwardTransitionCard2,this.animationOptions),u=n.animate(this.cardsService.forwardTransitionCard3,this.animationOptions)),this.headPosition=(this.srcsLength+this.headPosition-1)%this.srcsLength,setTimeout((function(){s.src=A[o.headPosition],r.src=A[(o.headPosition+1)%o.srcsLength],a.src=A[(o.headPosition+2)%o.srcsLength],c.src=A[(o.headPosition+3)%o.srcsLength],d.src=A[(o.headPosition+4)%o.srcsLength],p&&(h.cancel(),l.cancel(),m.cancel(),u.cancel()),o.isAnimationInProgress=!1}),this.isMinWidthWindow?this.animationOptions.duration:this.basicAnimationDuration)}},m.prototype.previous=function(){var t=this;if(!this.isAnimationInProgress){var h,l,m,u,p=!1;this.isAnimationInProgress=!0,this.isMinWidthWindow&&(p=!0,h=o.animate(this.cardsService.backwardTransitionBack,this.animationOptions),l=n.animate(this.cardsService.backwardTransitionCard3,this.animationOptions),m=i.animate(this.cardsService.backwardTransitionCard2,this.animationOptions),u=e.animate(this.cardsService.backwardTransitionCard1,this.animationOptions)),this.headPosition=(this.headPosition+1)%this.srcsLength,setTimeout((function(){s.src=A[t.headPosition],r.src=A[(t.headPosition+1)%t.srcsLength],a.src=A[(t.headPosition+2)%t.srcsLength],c.src=A[(t.headPosition+3)%t.srcsLength],d.src=A[(t.headPosition+4)%t.srcsLength],p&&(h.cancel(),l.cancel(),m.cancel(),u.cancel()),t.isAnimationInProgress=!1}),this.isMinWidthWindow?this.animationOptions.duration:this.basicAnimationDuration)}},m}(),F=function(){function t(t){this.cardsService=t,this.povContainerCardsDistance=80,this.povContainerSide=200,this.controlsContainerScale=4,this.cardsHeight=390,this.spaceBetweenCards=100,this.maxSpaceBetweenCards=150,this.minSpaceBetweenCards=50,this.previousSpaceBetweenCards,this.cardsWidthHeightRatio=4/3,this.povX=(this.povContainerCardsDistance+this.povContainerSide/2)*this.controlsContainerScale,this.povY=this.cardsHeight/2,this.cardProfileWidth=3,this.cornerX,this.cornerY,this.controlsVisible=!1,this.windowHeight=window.innerHeight,this.boundMovePov=this.movePov.bind(this),this.moveCardProfileFunction,this.cardProfileClickPoint}return t.prototype.initPovController=function(){f.style.width="".concat(this.povContainerSide,"px"),f.style.height="".concat(this.povContainerSide,"px"),f.style.margin="10px 10px 10px ".concat(this.povContainerCardsDistance,"px");var t,e=this.cardsService.getCardsProfiles(),i=this.cardProfileWidth*e.length,n=this.maxSpaceBetweenCards/this.controlsContainerScale*(e.length-1);C.style.width="".concat(i+n,"px");for(var o=0;o<e.length;o++)(t=e[o]).style.width="".concat(this.cardProfileWidth,"px"),t.style.height="".concat(this.cardsHeight/this.controlsContainerScale,"px"),o<e.length-1?t.style.margin="auto 0 auto ".concat(this.spaceBetweenCards/this.controlsContainerScale,"px"):t.style.margin="auto 0"},t.prototype.updateCards=function(){for(var t,e,i,n,o,s=[],r=0;r<5;r++)t=this.povY*this.spaceBetweenCards*r/(this.povX+this.spaceBetweenCards*r),n=(i=((this.cardsHeight*this.povX+this.povY*this.spaceBetweenCards*r)/(this.povX+this.spaceBetweenCards*r)-t)*(e=this.windowHeight/(2*this.povX)))*this.cardsWidthHeightRatio,o=t*e,s.push({height:i,width:n,verticalTranslation:o});var a=s[1].verticalTranslation,c=s[0].height-s[1].height,d=this.cardsService.getCardsElements();for(r=0;r<5;r++){var h=s[r],l=h.height,m=h.width,u=h.verticalTranslation;d[r].style.height="".concat(l,"px"),d[r].style.width="".concat(m,"px"),d[r].style.transform="translate3d(-50%, ".concat(a-u-c/2,"px, 0)")}y.style.width=d[0].style.width,y.style.height=d[0].style.height,w.style.width=d[1].style.width,w.style.height=d[1].style.height,w.style.transform=d[1].style.transform},t.prototype.setBordersMode=function(t){if(t!==this.cardsService.isBordersMode){this.cardsService.updateBordersMode(t);var e=this.cardsService.getCardsElements(),i=this.cardsService.getCardsImgsElements();t?(e.forEach((function(t){return t.classList.add("hidden-img")})),i.forEach((function(t){return t.classList.add("hidden-img")})),k.classList.remove("selected"),x.classList.add("selected"),w.classList.add("disabled")):(e.forEach((function(t){return t.classList.remove("hidden-img")})),i.forEach((function(t){return t.classList.remove("hidden-img")})),x.classList.remove("selected"),k.classList.add("selected"),w.classList.remove("disabled"))}},t.prototype.onCardProfileMouseDownFactory=function(t){var e=this;return function(i){e.moveCardProfileFunction&&document.removeEventListener("mousemove",e.moveCardProfileFunction),e.cardProfileClickPoint=i.clientX,e.previousSpaceBetweenCards=e.spaceBetweenCards,e.moveCardProfileFunction=e.moveCardProfileFactory(t).bind(e),document.addEventListener("mousemove",e.moveCardProfileFunction)}},t.prototype.onCardProfileMouseUp=function(){document.removeEventListener("mousemove",this.moveCardProfileFunction)},t.prototype.moveCardProfileFactory=function(t){var e=this;return function(i){i.preventDefault();var n=i.clientX,o=(e.cardProfileClickPoint-n)/t*e.controlsContainerScale+e.previousSpaceBetweenCards,s=Math.max(e.minSpaceBetweenCards,Math.min(o,e.maxSpaceBetweenCards));e.spaceBetweenCards=s,e.updateSpaceBetweenCardsProfiles(),e.updateCards()}},t.prototype.updateSpaceBetweenCardsProfiles=function(){for(var t=this.cardsService.getCardsProfiles(),e=0;e<t.length-1;e++)t[e].style.marginLeft="".concat(this.spaceBetweenCards/this.controlsContainerScale,"px")},t.prototype.movePov=function(t){t.preventDefault();var e,i,n=this.povContainerSide,o=this.povContainerSide,s=t.clientX,r=t.clientY;e=s>this.cornerX+n/2?Math.min(s-this.cornerX,n):Math.max(s-this.cornerX,0),i=r>this.cornerY+o/2?Math.min(r-this.cornerY,o):Math.max(r-this.cornerY,0),p.style.left="".concat(e,"px"),p.style.top="".concat(i,"px"),this.povX=(e+this.povContainerCardsDistance)*this.controlsContainerScale,this.povY=(o-i-(o-this.cardsHeight/this.controlsContainerScale)/2)*this.controlsContainerScale,this.updateCards()},t.prototype.openControlsPanel=function(){u.classList.add("visible"),this.controlsVisible=!0},t.prototype.closeControlsPanel=function(){u.classList.remove("visible"),this.controlsVisible=!1},t.prototype.onCustomizeBtnClick=function(){this.controlsVisible?this.closeControlsPanel():this.openControlsPanel()},t.prototype.onPovMouseDown=function(){this.boundMovePov&&document.removeEventListener("mousemove",this.boundMovePov),g.style.backgroundColor="rgba(150,150,150,0.1)",this.cornerX=g.getBoundingClientRect().x,this.cornerY=g.getBoundingClientRect().y,document.addEventListener("mousemove",this.boundMovePov)},t.prototype.onPovMouseUp=function(){g.style.backgroundColor="",document.removeEventListener("mousemove",this.boundMovePov),this.cardsService.updateAnimations()},t.prototype.onMouseUp=function(t){this.controlsVisible&&t.target instanceof HTMLElement&&null===t.target.closest("div#controls-container")&&null===t.target.closest("div#customize-btn")&&this.closeControlsPanel(),this.onCardProfileMouseUp(),this.onPovMouseUp()},t.prototype.updateWindowInnerHeight=function(){this.windowHeight=window.innerHeight},t}(),H=new T,X=new D(H),O=new F(H);O.updateCards(),H.updateAnimations(),X.setImgsSources(),X.showCards(),O.initPovController(),W(O),I.addEventListener("click",(function(){return X.previous()})),S.addEventListener("click",(function(){return X.next()})),w.addEventListener("click",(function(){return X.showModal()})),m.addEventListener("click",(function(){return X.hideModal()})),M.addEventListener("click",(function(){return O.onCustomizeBtnClick()})),v.addEventListener("mousedown",(function(){return O.onPovMouseDown()})),P.addEventListener("mousedown",O.onCardProfileMouseDownFactory(1)),B.addEventListener("mousedown",O.onCardProfileMouseDownFactory(2)),b.addEventListener("mousedown",O.onCardProfileMouseDownFactory(3)),L.addEventListener("mousedown",O.onCardProfileMouseDownFactory(4)),k.addEventListener("click",(function(){return O.setBordersMode(!1)})),x.addEventListener("click",(function(){return O.setBordersMode(!0)})),document.addEventListener("mouseup",(function(t){return O.onMouseUp(t)})),window.addEventListener("resize",(function(){return W(O)}))})();